{% extends "base.html" %}

{% block title %}Edit Note{% endblock %}

{% block content_title %}Edit Note{% endblock %}

{% block extra_scripts %}<script src="{{ url_for('static', filename='js/marked.min.js') }}" type="text/javascript"></script>{% endblock %}

{% block content %}
  <form id="thenote" action="{{ url_for('edit', slug=entry.slug) }}" class="form-horizontal" method="post">
    <div class="form-group">
      <label for="title" class="col-sm-2 control-label">Title</label>
      <div class="col-sm-10">
        <input class="form-control" id="title" name="title" type="text" value="{{ request.form.get('title', entry.title) }}">
      </div>
    </div>
    <div class="form-group">
      <label for="Content" class="col-sm-2 control-label">Content<br><em><a tabindex="-1" target="_blank" href="https://github.com/keybits/permanote/wiki/Permanote-Help">Help</a></em></label>
      <div class="col-sm-10">
        <textarea class="form-control" id="content" name="content" style="height: 300px;">{{ request.form.get('content', entry.content) }}</textarea>
      </div>
    </div>

    <div class="form-group">
      <label for="tags" class="col-sm-2 control-label">Tags</label>
      <div class="col-sm-10">
        <input class="form-control" id="tags" name="tags" type="text" placeholder="Separate with spaces" value="{{ request.form.get('tags', tags) }}">
      </div>
    </div>

    <div class="form-group">
      <div class="col-sm-offset-2 col-sm-10">
        <button class="btn btn-primary" type="submit">Save</button>
        <a class="btn btn-default" href="{{ url_for('index') }}">Cancel</a>
      </div>
    </div>

    <div class="form-group">
    <div class="col-sm-offset-2 col-sm-10">
    <div class="checkbox">
      <label>
        <input {% if entry.archived %}checked="checked" {% endif %}name="archived" type="checkbox" value="y"> Archive?
      </label>
    </div>
    </div>
    </div>

  </form>
{% endblock %}

{% block end_of_body_scripts %}
  <script type="text/javascript">
      $("#content").bind('input', function(event) {
        $("#preview").html(marked(this.value))
      });
  </script>
{% endblock %}
